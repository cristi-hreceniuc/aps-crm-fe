<!-- views/partials/sidenav.ejs -->
<%
// Derivăm safe displayName și inițiala
const displayName = (user && (user.name || user.fullName || user.displayName || user.email)) || 'Utilizator';
const emailSafe   = (user && user.email) || '';
const initial     = (displayName.trim()[0] || 'U').toUpperCase();
%>

<aside class="sidenav" aria-label="Meniu principal">
  <div class="nav-header">
    <a href="/" class="brand" title="Acțiune pentru Sănătate">
      <!-- doar imaginea (fără text) -->
      <img class="brand-logo" src="/aps-logo.png" alt="APS CRM" />
      <span class="brand-text" aria-hidden="true">APS CRM</span>
    </a>
  </div>

  <nav class="nav-list">
    <a href="/"          class="nav-link <%= path === '/' ? 'active' : '' %>"          title="Acasă">
      <span class="nav-ico">🏠</span><span class="nav-text">Acasă</span>
    </a>
    <a href="/voluntari" class="nav-link <%= path === '/voluntari' ? 'active' : '' %>" title="Voluntari">
      <span class="nav-ico">🤝</span><span class="nav-text">Voluntari</span>
    </a>
    <a href="/formulare" class="nav-link <%= path === '/formulare' ? 'active' : '' %>" title="Formulare">
      <span class="nav-ico">📄</span><span class="nav-text">Formulare</span>
    </a>
    <a href="/donatii"   class="nav-link <%= path === '/donatii' ? 'active' : '' %>"   title="Donații">
      <span class="nav-ico">💝</span><span class="nav-text">Donații</span>
    </a>
    <a href="/proiecte"  class="nav-link <%= path === '/proiecte' ? 'active' : '' %>"  title="Proiecte">
      <span class="nav-ico">📦</span><span class="nav-text">Proiecte</span>
    </a>
    <a href="/cazuri"    class="nav-link <%= path === '/cazuri' ? 'active' : '' %>"    title="Cazuri">
      <span class="nav-ico">📋</span><span class="nav-text">Cazuri</span>
    </a>
    <a href="/rapoarte"  class="nav-link <%= path === '/rapoarte' ? 'active' : '' %>"  title="Rapoarte">
      <span class="nav-ico">📊</span><span class="nav-text">Rapoarte</span>
    </a>
    <a href="/setari"    class="nav-link <%= path === '/setari' ? 'active' : '' %>"    title="Setări">
      <span class="nav-ico">⚙️</span><span class="nav-text">Setări</span>
    </a>
    <a href="/dashboard" class="nav-link <%= path === '/dashboard' ? 'active' : '' %>" title="Dashboard">
      <span class="nav-ico">📈</span><span class="nav-text">Dashboard</span>
    </a>
  </nav>

  <!-- Footer cu utilizatorul -->
  <div class="nav-footer">
    <div class="user-block" title="<%= displayName %>">
      <div class="avatar"><%= initial %></div>
      <div class="user-text">
        <div class="user-name"><%= displayName %></div>
        <% if (emailSafe) { %>
          <div class="user-email"><%= emailSafe %></div>
        <% } %>
      </div>
    </div>
    <form method="post" action="/logout">
      <button class="btn-mini outline logout-btn" type="submit">Logout</button>
    </form>
  </div>
</aside>

<!-- Mobil: buton hamburger + scrim overlay (globale pe toate paginile) -->
<button class="nav-toggle" aria-label="Deschide meniul" hidden>
  <span class="bar"></span>
</button>
<div class="nav-scrim" hidden></div>
