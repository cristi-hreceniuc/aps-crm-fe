<!-- views/sponsorizare.ejs -->
<%- include('partials/head', { title: 'Contracte sponsorizare' }) %>

<div class="app">
  <%- include('partials/sidenav', { path, isLogged, user }) %>

  <main class="content-shell">
    <header class="content-header">
      <h1>Contracte sponsorizare</h1>
      <small class="muted">Listă paginată, sortabilă și cu căutare</small>
    </header>

    <%- include('partials/datagrid', {
      gridId: 'sponsorizare',
      title: 'Contracte sponsorizare',
      subtitle: 'Date despre contractele de sponsorizare',
      searchPlaceholder: 'Caută după nume firmă, cod fiscal, email, telefon, IBAN…',

      endpoint: '/api/sponsorizare',
      endpointSearch: '/api/sponsorizare/search',
      pageSize: 10,

      api: {
        pageParam: 'page', sizeParam: 'size',
        sortParam: 'sort', sortValue: '{key},{dir}',
        pageBase: 0, searchParam: 'q'
      },
      response: { items: 'content', page: 'number', size: 'size', total: 'totalElements' },

      columns: [
        { key:'companyName',  label:'Nume firmă',        sortable:true, sortKey:'companyName', clamp:2 },
        { key:'fiscalCode',   label:'Cod fiscal',        sortable:true, sortKey:'fiscalCode'   },
        { key:'email',        label:'Email',             sortable:true, sortKey:'email'        },
        { key:'phone',        label:'Telefon',           sortable:true, sortKey:'phone'        },
        { key:'iban',         label:'IBAN',              sortable:true, sortKey:'iban', clamp:1 },
        { key:'amount',       label:'Sumă (RON)',              sortable:true, sortKey:'amount', type:'number' },
        { key:'contractDate', label:'Data contractului', sortable:true, sortKey:'contractDate', type:'date' },

        { key:'downloaded',   label:'Descărcat', type:'bool', sortable:true, sortKey:'downloaded' },
        { key:'verified',     label:'Verificat', type:'bool', sortable:true, sortKey:'verified'   },
        { key:'corrupt',      label:'Eronat',    type:'bool', sortable:true, sortKey:'corrupt'    },

        { key:'actions',      label:'Acțiuni',   type:'actions' }
      ],
      autosize: { minPx: 90, maxPx: 340 }
    }) %>

    
  </main>
</div>

<%- include('partials/footer') %>
